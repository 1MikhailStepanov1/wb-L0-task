# Сервис информации о заказах

Сервис предназначен для обработки информации о заказах.

## Стек технологий

- Golang 1.24
- PostgreSQL 14
- Kafka 3.7.0
- Kafka-UI

## Подготовка к запуску
В данном проекте используется утилита `Task` для управления вспомогательными командами.

Ссылка на гайд по установке - https://taskfile.dev/docs/installation

## Запуск основного сервиса

1. Скопировать файл переменных окружения (внести изменения, если необходимо)

```cp .env.example .env```

2. Поднять внешние сервисы, необходимые для работы приложения

```docker compose up -d --scale backend=0```

3. Применить миграции к базе данных

```task migrate.up```

4. Развернуть сервис
```docker compose up -d```

После запуска будет доступен веб-интерфейс для получения информации о заказах по следующему адресу

`http://localhost:8080/static/index.hmtl`

## Обогащение данными

Для обогащения базы данными создан генератор `third_party/order_generator.go`, который автоматически посылает сообщения в кафку

Его запуск осуществляется при помощи команды из Taskfile - `task generator.run`

Особенности генератора:
- Часть данных генерируется рандомно, что позволяет увидеть как сервис обрабатывает валидные и невалидные данные
- Генератор работает одну минуту, посылая данные каждые 100 миллисекунд, что добавляет в базу ~100-150 новых записей заказов. 
Если необходимо сгенерировать еще данные - нужно перезапустить генератор