version: "3"

tasks:
  default:
    cmds:
      - task --list

  install:
    desc: "Install dependencies for application work"
    cmds:
      - GOBIN=$(LOCAL_BIN) go install github.com/pressly/goose/v3/cmd/goose@latest

  migrate_up:
    desc: "Apply migrations"
    cmds:
      - goose -dir migrations postgres "postgres://order_service_user:Passw0rd@localhost:5435/order_db?sslmode=disable" up

  lint:
    desc: "Activate linters"
    cmds:
      - golangci-lint run ./...

  tidy:
    desc: "Cleaning go mod"
    cmds:
      - go mod tidy